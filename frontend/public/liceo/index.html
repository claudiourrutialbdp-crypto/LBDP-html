<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Liceo - Inicio</title>
  <meta name="description" content="Sitio institucional del Liceo - Inicio">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link href="/assets/css/liceo.css" rel="stylesheet">
</head>
<body>
  <!-- Topbar -->
  <div class="topbar bg-primary-liceo text-white py-1 small sticky-top" style="z-index:1060">
    <div class="container d-flex justify-content-between align-items-center">
      <div class="d-flex gap-3 align-items-center">
        <a href="mailto:contacto@liceo.edu.cl" class="d-inline-flex align-items-center gap-1"><i class="bi bi-envelope icon"></i><span>contacto@liceo.edu.cl</span></a>
        <a href="tel:+56223456789" class="d-none d-sm-inline-flex align-items-center gap-1"><i class="bi bi-telephone icon"></i><span>+56 2 2345 6789</span></a>
      </div>
      <div class="d-flex gap-3">
        <a href="#" aria-label="Facebook" class="icon"><i class="bi bi-facebook"></i></a>
        <a href="#" aria-label="Instagram" class="icon"><i class="bi bi-instagram"></i></a>
      </div>
    </div>
  </div>

  <!-- Navbar (igualada + Nosotros con submenú) -->
  <nav class="navbar navbar-expand-lg bg-white sticky-top navbar-liceo" aria-label="Principal">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center gap-2" href="/liceo/index.html" aria-label="Inicio">
        <span class="rounded" style="width:32px;height:32px;background:var(--aqua);display:inline-block"></span>
        <strong id="brandName">Liceo</strong>
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMain" aria-controls="navbarMain" aria-expanded="false" aria-label="Abrir menú">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarMain">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0" id="navList">
          <li class="nav-item"><a class="nav-link active" id="navInicio" href="/liceo/index.html">Inicio</a></li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="nosDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Nosotros</a>
            <ul class="dropdown-menu" aria-labelledby="nosDropdown">
              <li><a class="dropdown-item" href="/liceo/nosotros-historia.html">Historia</a></li>
              <li><a class="dropdown-item" href="/liceo/nosotros-mision.html">Misión</a></li>
              <li><a class="dropdown-item" href="/liceo/nosotros-vision.html">Visión</a></li>
              <li><a class="dropdown-item" href="/liceo/nosotros-comunidad.html">Comunidad Educativa</a></li>
              <li><a class="dropdown-item" href="/liceo/nosotros-pme.html">PME</a></li>
            </ul>
          </li>
          <li class="nav-item"><a class="nav-link" id="navOferta" href="/liceo/oferta.html">Oferta Educativa</a></li>
          <li class="nav-item"><a class="nav-link" id="navCalAct" href="/liceo/calendario-actividades.html">Calendario de Actividades</a></li>
          <li class="nav-item"><a class="nav-link" id="navCalEval" href="/liceo/calendario-evaluaciones.html">Calendario de Evaluaciones</a></li>
          <li class="nav-item"><a class="nav-link" id="navUniforme" href="/liceo/uniforme.html">Uniforme Escolar</a></li>
          <li class="nav-item"><a class="nav-link" id="navTalleres" href="/liceo/talleres.html">Talleres Extraescolares</a></li>
          <li class="nav-item"><a class="nav-link" id="navNoticias" href="/liceo/noticias.html">Noticias y Comunicados</a></li>
          <li class="nav-item"><a class="nav-link" id="navDocumentos" href="/liceo/documentos.html">Documentos</a></li>
          <li class="nav-item"><a class="nav-link" id="navContacto" href="/liceo/contacto.html">Contacto</a></li>
        </ul>
        <div class="d-flex align-items-center gap-2">
          <select class="form-select form-select-sm" id="langSelect" style="width:120px" aria-label="Selector de idioma">
            <option value="es" selected>ES - Español</option>
            <option value="en">EN - English</option>
          </select>
        </div>
      </div>
    </div>
  </nav>

  <!-- Hero / Slider -->
  <section id="inicio" class="soft-bg py-3">
    <div class="container">
      <div id="heroCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel" aria-label="Slider institucional">
        <div class="carousel-inner rounded overflow-hidden position-relative">
          <div class="hero-gradient"></div>
          <div class="carousel-item active">
            <img class="d-block w-100 parallax-img" src="https://images.unsplash.com/photo-1723958461974-4d15c8b32ec6" alt="Campus moderno" loading="lazy">
          </div>
          <div class="carousel-item">
            <img class="d-block w-100 parallax-img" src="https://images.unsplash.com/photo-1702737832079-ed5864397f92" alt="Edificio institucional" loading="lazy">
          </div>
          <div class="carousel-item">
            <img class="d-block w-100 parallax-img" src="https://images.unsplash.com/photo-1728500704191-af0407c47035" alt="Edificio blanco" loading="lazy">
          </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev" aria-label="Anterior">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next" aria-label="Siguiente">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
        </button>
      </div>
    </div>
  </section>

  <!-- Accesos rápidos -->
  <section id="accesos" class="py-4">
    <div class="container">
      <h2 class="section-title h5 mb-3" id="i18nQuick">Accesos Rápidos</h2>
      <div class="row g-3" id="quickLinks">
        <div class="col-md-4">
          <div class="card card-hover h-100 reveal">
            <div class="card-body">
              <h3 class="h6">Calendario de Actividades</h3>
              <a href="/liceo/calendario-actividades.html" class="link-primary" id="i18nSeeMore1">Ver más</a>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card card-hover h-100 reveal">
            <div class="card-body">
              <h3 class="h6">Noticias y Comunicados</h3>
              <a href="/liceo/noticias.html" class="link-primary" id="i18nSeeMore2">Ver más</a>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card card-hover h-100 reveal">
            <div class="card-body">
              <h3 class="h6">Documentos</h3>
              <a href="/liceo/documentos.html" class="link-primary" id="i18nSeeMore3">Ver más</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Diario Mural Digital -->
  <section id="mural" class="py-4">
    <div class="container">
      <div class="d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2">
        <h2 class="section-title h5 m-0" id="muralTitle">Diario Mural Digital</h2>
        <div class="d-flex align-items-center gap-2">
          <label for="muralFilter" class="small text-secondary" id="muralFilterLabel">Categoría:</label>
          <select id="muralFilter" class="form-select form-select-sm" style="width:200px">
            <option value="all" selected>Todos</option>
            <option value="Comunicados">Comunicados</option>
            <option value="Eventos">Eventos</option>
            <option value="Académico">Académico</option>
            <option value="Recordatorio">Recordatorio</option>
          </select>
        </div>
      </div>

      <div class="mural p-3 rounded">
        <form id="muralForm" class="row g-2 align-items-end">
          <div class="col-12 col-md-3">
            <label class="form-label small" for="mTitle" id="mTitleLabel">Título</label>
            <input id="mTitle" class="form-control form-control-sm" required maxlength="60" />
          </div>
          <div class="col-12 col-md-5">
            <label class="form-label small" for="mBody" id="mBodyLabel">Mensaje</label>
            <input id="mBody" class="form-control form-control-sm" required maxlength="140" />
          </div>
          <div class="col-6 col-md-2">
            <label class="form-label small" for="mCat" id="mCatLabel">Categoría</label>
            <select id="mCat" class="form-select form-select-sm">
              <option>Comunicados</option>
              <option>Eventos</option>
              <option>Académico</option>
              <option>Recordatorio</option>
            </select>
          </div>
          <div class="col-6 col-md-1">
            <div class="form-check" title="Fijar en la parte superior">
              <input class="form-check-input" type="checkbox" id="mPin" />
              <label class="form-check-label small" for="mPin" id="mPinLabel">Fijar</label>
            </div>
          </div>
          <div class="col-12 col-md-1 d-grid">
            <button class="btn btn-sm btn-primary-liceo" type="submit" id="mAddBtn">Agregar</button>
          </div>
        </form>

        <div class="mural-grid mt-3" id="muralGrid" aria-live="polite"></div>
      </div>
    </div>
  </section>

  <!-- Últimas Noticias -->
  <section id="ultimas" class="py-4">
    <div class="container">
      <h2 class="section-title h5 mb-3" id="i18nLatest">Últimas Noticias</h2>
      <div class="row g-3" id="latestNews"></div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer mt-5 py-5">
    <div class="container">
      <div class="row g-4">
        <div class="col-md-4">
          <h3 class="h6 text-white mb-3" id="footMap">Mapa del Sitio</h3>
          <ul class="list-unstyled small">
            <li><a id="footInicio" href="/liceo/index.html">Inicio</a></li>
            <li><a id="footNoticias" href="/liceo/noticias.html">Noticias</a></li>
            <li><a id="footDocumentos" href="/liceo/documentos.html">Documentos</a></li>
            <li><a id="footContacto" href="/liceo/contacto.html">Contacto</a></li>
          </ul>
        </div>
        <div class="col-md-4">
          <h3 class="h6 text-white mb-3" id="footContact">Datos de Contacto</h3>
          <ul class="list-unstyled small">
            <li><i class="bi bi-envelope"></i> contacto@liceo.edu.cl</li>
            <li><i class="bi bi-telephone"></i> +56 2 2345 6789</li>
            <li>Av. Educativa 1234, Santiago, Chile</li>
          </ul>
        </div>
        <div class="col-md-4">
          <h3 class="h6 text-white mb-3">Redes</h3>
          <div class="d-flex gap-3">
            <a href="#" aria-label="Facebook"><i class="bi bi-facebook"></i></a>
            <a href="#" aria-label="Instagram"><i class="bi bi-instagram"></i></a>
          </div>
        </div>
      </div>
      <hr class="border-secondary opacity-25 my-4">
      <div class="small text-secondary">© <span id="year"></span> Liceo. <span id="rightsText">Todos los derechos reservados.</span></div>
    </div>
  </footer>

  <button class="back-to-top" id="backTop" aria-label="Ir arriba" title="Ir arriba"><i class="bi bi-chevron-up"></i></button>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
  // ------- Datos mock para últimas noticias ---------
  const NEWS = [
    {id:'n1', title:'Inicio de Clases 2025', date:'2025-03-04', category:'Comunicados', excerpt:'Bienvenida a toda la comunidad educativa al nuevo año escolar 2025.', images:['https://images.pexels.com/photos/33415773/pexels-photo-33415773.jpeg','https://images.unsplash.com/photo-1524995997946-a1c2e315a42f']},
    {id:'n2', title:'Feria de Ciencias Regional', date:'2025-05-18', category:'Eventos', excerpt:'Participa de la feria con proyectos innovadores y trabajos colaborativos.', images:['https://images.unsplash.com/photo-1498243691581-b145c3f54a5a','https://images.unsplash.com/photo-1536985576470-b7e4a0363a19']},
    {id:'n3', title:'Taller de Lectura Crítica', date:'2025-06-10', category:'Académico', excerpt:'Nuevo taller de habilidades lectoras disponible para 1º a 4º medio.', images:['https://images.unsplash.com/photo-1524995997946-a1c2e315a42f','https://images.pexels.com/photos/7929418/pexels-photo-7929418.jpeg']},
    {id:'n4', title:'Campeonato Deportivo Escolar', date:'2025-04-22', category:'Eventos', excerpt:'Inscripciones abiertas para selecciones deportivas.', images:['https://images.unsplash.com/photo-1702737832079-ed5864397f92','https://images.unsplash.com/photo-1728500704191-af0407c47035']},
    {id:'n5', title:'Entrega de Informes de Notas', date:'2025-07-01', category:'Comunicados', excerpt:'Publicación de evaluaciones del primer semestre en plataforma.', images:['https://images.unsplash.com/photo-1536985576470-b7e4a0363a19','https://images.pexels.com/photos/33415745/pexels-photo-33415745.jpeg']},
    {id:'n6', title:'Biblioteca: Nuevas Adquisiciones', date:'2025-07-10', category:'Académico', excerpt:'Se incorporan nuevos títulos a la colección.', images:['https://images.unsplash.com/photo-1498243691581-b145c3f54a5a','https://images.unsplash.com/photo-1524995997946-a1c2e315a42f']},
  ];

  // ------- I18N sencillo ---------
  const I18N = {
    es: {
      quick:'Accesos Rápidos', latest:'Últimas Noticias', seeMore:'Ver más', sitemap:'Mapa del Sitio', contactData:'Datos de Contacto', rights:'Todos los derechos reservados.', backTop:'Ir arriba',
      muralTitle:'Diario Mural Digital', cat:'Categoría:', title:'Título', body:'Mensaje', add:'Agregar', pin:'Fijar', all:'Todos'
    },
    en: {
      quick:'Quick Links', latest:'Latest News', seeMore:'See more', sitemap:'Sitemap', contactData:'Contact Info', rights:'All rights reserved.', backTop:'Go to top',
      muralTitle:'Digital Bulletin Board', cat:'Category:', title:'Title', body:'Message', add:'Add', pin:'Pin', all:'All'
    }
  };
  function applyI18n(lang){
    const d = I18N[lang] || I18N.es;
    document.getElementById('i18nQuick').textContent = d.quick;
    document.getElementById('i18nLatest').textContent = d.latest;
    document.getElementById('i18nSeeMore1').textContent = d.seeMore;
    document.getElementById('i18nSeeMore2').textContent = d.seeMore;
    document.getElementById('i18nSeeMore3').textContent = d.seeMore;
    document.getElementById('footMap').textContent = d.sitemap;
    document.getElementById('footContact').textContent = d.contactData;
    document.getElementById('rightsText').textContent = d.rights;
    document.getElementById('backTop').setAttribute('title', d.backTop);
    document.getElementById('backTop').setAttribute('aria-label', d.backTop);

    document.getElementById('muralTitle').textContent = d.muralTitle;
    document.getElementById('muralFilterLabel').textContent = d.cat;
    document.getElementById('mTitleLabel').textContent = d.title;
    document.getElementById('mBodyLabel').textContent = d.body;
    document.getElementById('mCatLabel').textContent = d.cat;
    document.getElementById('mPinLabel').textContent = d.pin;
    document.getElementById('mAddBtn').textContent = d.add;
    document.querySelector('#muralFilter option[value="all"]').textContent = d.all;
  }

  const savedLang = localStorage.getItem('lang') || 'es';
  const langSelect = document.getElementById('langSelect');
  langSelect.value = savedLang; applyI18n(savedLang);
  langSelect.addEventListener('change', (e)=>{ localStorage.setItem('lang', e.target.value); applyI18n(e.target.value); });

  // Año en footer
  document.getElementById('year').textContent = new Date().getFullYear();

  // Render últimas 5 noticias + stagger reveal
  const latest = [...NEWS].sort((a,b)=>a.date<b.date?1:-1).slice(0,5);
  const latestContainer = document.getElementById('latestNews');
  latest.forEach((n, idx) => {
    const col = document.createElement('div');
    col.className = 'col-12 col-sm-6 col-lg-4 col-xxl-3 reveal';
    col.style.transitionDelay = `${idx*60}ms`;
    col.innerHTML = `
      <article class=\"card h-100 card-hover\" role=\"article\">
        <img class=\"thumb\" src=\"${n.images[0]}\" alt=\"${n.title}\">
        <div class=\"card-body\">
          <p class=\"text-muted small mb-1\">${new Date(n.date).toLocaleDateString()}</p>
          <h3 class=\"h6\">${n.title}</h3>
          <p class=\"small text-secondary\">${n.excerpt}</p>
          <a href=\"/liceo/noticias.html#${n.id}\" class=\"link-success\">Ver detalle</a>
        </div>
      </article>`;
    latestContainer.appendChild(col);
  });

  // Intersección para revelar
  const io = new IntersectionObserver((entries)=>{
    entries.forEach(e=>{ if(e.isIntersecting) e.target.classList.add('visible'); });
  },{threshold:.2});
  document.querySelectorAll('.reveal').forEach(el=>io.observe(el));

  // Back to top + navbar sombra + parallax
  const backTop = document.getElementById('backTop');
  window.addEventListener('scroll',()=>{
    const nav = document.querySelector('.navbar-liceo');
    nav.classList.toggle('navbar-elevated', window.scrollY>12);
    backTop.classList.toggle('show', window.scrollY>240);
    updateParallax();
  });
  backTop.addEventListener('click',()=> window.scrollTo({top:0, behavior:'smooth'}));

  function updateParallax(){
    document.querySelectorAll('.parallax-img').forEach(img=>{
      const rect = img.getBoundingClientRect();
      const vh = window.innerHeight || 800;
      const progress = Math.min(1, Math.max(0, 1 - rect.top/vh));
      const y = progress * 12;
      img.style.transform = `translateY(${y}px) scale(1.02)`;
    });
  }
  updateParallax();

  // --------- Diario Mural (localStorage) ----------
  const MURAL_KEY = 'mural_notes_v1';
  const muralGrid = document.getElementById('muralGrid');
  const muralFilter = document.getElementById('muralFilter');
  const form = document.getElementById('muralForm');

  const seed = [
    { id:'a1', title:'Reunión de Apoderados', body:'Jueves 19:00 en sala de clases.', cat:'Comunicados', pinned:true, createdAt:'2025-07-01T10:00:00Z' },
    { id:'a2', title:'Ensayo PSU', body:'Simulacro este sábado 09:00.', cat:'Académico', pinned:false, createdAt:'2025-07-02T12:00:00Z' },
    { id:'a3', title:'Campeonato Inter-Escolar', body:'Inscripciones abiertas hasta el viernes.', cat:'Eventos', pinned:false, createdAt:'2025-07-03T09:00:00Z' },
    { id:'a4', title:'Traer delantal para laboratorio', body:'Actividad práctica de química.', cat:'Recordatorio', pinned:false, createdAt:'2025-07-04T08:00:00Z' }
  ];
  if(!localStorage.getItem(MURAL_KEY)) localStorage.setItem(MURAL_KEY, JSON.stringify(seed));

  function loadNotes(){
    return JSON.parse(localStorage.getItem(MURAL_KEY)||'[]');
  }
  function saveNotes(list){
    localStorage.setItem(MURAL_KEY, JSON.stringify(list));
  }
  function renderNotes(){
    const list = loadNotes();
    const cat = muralFilter.value;
    const sorted = [...list].sort((a,b)=> (a.pinned===b.pinned ? (a.createdAt<b.createdAt?1:-1) : (a.pinned? -1:1)));
    const filtered = cat==='all' ? sorted : sorted.filter(n=>n.cat===cat);
    muralGrid.innerHTML = '';
    filtered.forEach((n, idx)=>{
      const div = document.createElement('div');
      const rot = ((idx%5)-2)*0.6; // pequeña variación
      div.innerHTML = `
        <article class=\"note ${n.pinned?'note-pinned':''} reveal\" style=\"--r:${rot}deg\" aria-label=\"${n.title}\">
          <div class=\"d-flex align-items-center justify-content-between\">
            <div>
              <span class=\"badge bg-warning-subtle text-dark border\">${n.cat}</span>
              ${n.pinned?'<span class=\"badge bg-info-subtle text-dark border\"><i class=\"bi bi-pin-angle\"></i> Pin</span>':''}
            </div>
            <small class=\"text-muted\">${new Date(n.createdAt).toLocaleDateString()}</small>
          </div>
          <h3 class=\"h6 mt-1 mb-1\">${n.title}</h3>
          <p class=\"small mb-2\">${n.body}</p>
          <div class=\"d-flex gap-2\">
            <button class=\"btn btn-sm btn-outline-secondary\" aria-label=\"Fijar\" data-act=\"pin\" data-id=\"${n.id}\"><i class=\"bi bi-pin-angle\"></i></button>
            <button class=\"btn btn-sm btn-outline-danger\" aria-label=\"Eliminar\" data-act=\"del\" data-id=\"${n.id}\"><i class=\"bi bi-trash\"></i></button>
          </div>
        </article>`;
      muralGrid.appendChild(div.firstElementChild);
    });
    document.querySelectorAll('#muralGrid [data-act]').forEach(btn=>{
      btn.addEventListener('click', (e)=>{
        const id = btn.getAttribute('data-id');
        const act = btn.getAttribute('data-act');
        const list = loadNotes();
        const idx = list.findIndex(x=>x.id===id);
        if(idx<0) return;
        if(act==='del'){ list.splice(idx,1); }
        if(act==='pin'){ list[idx].pinned = !list[idx].pinned; }
        saveNotes(list); renderNotes();
      });
    });
    document.querySelectorAll('.reveal').forEach(el=>io.observe(el));
  }

  form.addEventListener('submit', (e)=>{
    e.preventDefault();
    const title = document.getElementById('mTitle').value.trim();
    const body = document.getElementById('mBody').value.trim();
    const cat = document.getElementById('mCat').value;
    const pinned = document.getElementById('mPin').checked;
    if(!title || !body) return;
    const list = loadNotes();
    list.push({ id: crypto.randomUUID(), title, body, cat, pinned, createdAt: new Date().toISOString() });
    saveNotes(list); form.reset(); renderNotes();
  });
  muralFilter.addEventListener('change', renderNotes);
  renderNotes();

  </script>
</body>
</html>